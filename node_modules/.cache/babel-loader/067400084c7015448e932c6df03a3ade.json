{"ast":null,"code":"import _slicedToArray from \"/Users/17476018U/Google \\u0414\\u0438\\u0441\\u043A/Projects/Frontend/Project/DoctorsFront/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/17476018U/Google \\u0414\\u0438\\u0441\\u043A/Projects/Frontend/Project/DoctorsFront/src/components/ScheduleTable/ScheduleTable.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport ScheduleCell from '../ScheduleCell/ScheduleCell';\nimport Button from 'react-bootstrap/Button';\nimport styles from './ScheduleTable.module.css';\nimport { createAppointment } from '../../redux/appointment/actions';\nimport { days2weeks, info2time } from '../../utils/datetime';\n\nclass ScheduleTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.handleClick = this.handleClick.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleClick(element) {\n    const _info2time = info2time(element.receptionInfo),\n          _info2time2 = _slicedToArray(_info2time, 2),\n          start = _info2time2[0],\n          end = _info2time2[1];\n\n    this.setState({\n      [element.date]: {\n        state: !this.state[element.date],\n        startTime: element.date + 'T' + start + ':00',\n        endTime: element.date + 'T' + end + ':00'\n      }\n    });\n  }\n\n  handleSubmit() {\n    console.log('schedule tabl state', this.state);\n    Object.keys(this.state).filter(x => this.state[x].state).map(x => this.props.createAppointment([this.props.omsNumber, this.props.birthDate, {\n      startTime: this.state[x].startTime,\n      endTime: this.state[x].endTime,\n      doctor: this.props.doctor\n    }])); // this.setState(Object.keys(this.state).reduce((obj, x) => {console.log(obj, x); obj[x] = {state: false}; return obj;}, {}))\n  }\n\n  renderHead() {\n    return React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u043D\\u0435\\u0434\\u0435\\u043B\\u044C\\u043D\\u0438\\u043A\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"\\u0412\\u0442\\u043E\\u0440\\u043D\\u0438\\u043A\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"\\u0421\\u0440\\u0435\\u0434\\u0430\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"\\u0427\\u0435\\u0442\\u0432\\u0435\\u0440\\u0433\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"\\u041F\\u044F\\u0442\\u043D\\u0438\\u0446\\u0430\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"\\u0421\\u0443\\u0431\\u0431\\u043E\\u0442\\u0430\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"\\u0412\\u043E\\u0441\\u043A\\u0440\\u0435\\u0441\\u0435\\u043D\\u044C\\u0435\")));\n  }\n\n  renderBody() {\n    const table = [];\n    const weeks = days2weeks(this.props.schedule.schedule);\n\n    for (const week of weeks) {\n      let row = [];\n\n      for (const day of week) {\n        // active={Boolean(this.state[day.date])}\n        row.push(React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(ScheduleCell, {\n          handleClick: this.handleClick,\n          active: Boolean(this.state[day.date]),\n          cell: day,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        })));\n      }\n\n      table.push(React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, row));\n    }\n\n    return table;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: styles.schedule,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: styles.table,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, this.renderHead(), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, this.renderBody())), React.createElement(\"div\", {\n      className: styles.footer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      to: '/appointments',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.handleSubmit,\n      variant: \"primary\",\n      size: \"lg\",\n      active: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, 'Встать в очередь'))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  console.log('state schedule table', state);\n  return {\n    omsNumber: state.user.omsNumber,\n    birthDate: state.user.birthDate\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  createAppointment: payload => dispatch(createAppointment(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScheduleTable);","map":{"version":3,"sources":["/Users/17476018U/Google Диск/Projects/Frontend/Project/DoctorsFront/src/components/ScheduleTable/ScheduleTable.js"],"names":["React","connect","NavLink","ScheduleCell","Button","styles","createAppointment","days2weeks","info2time","ScheduleTable","Component","constructor","props","state","handleClick","bind","handleSubmit","element","receptionInfo","start","end","setState","date","startTime","endTime","console","log","Object","keys","filter","x","map","omsNumber","birthDate","doctor","renderHead","renderBody","table","weeks","schedule","week","row","day","push","Boolean","render","footer","mapStateToProps","user","mapDispatchToProps","dispatch","payload"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\n\nimport ScheduleCell from '../ScheduleCell/ScheduleCell';\n\nimport Button from 'react-bootstrap/Button'\n\nimport styles from './ScheduleTable.module.css';\n\nimport { createAppointment } from '../../redux/appointment/actions';\n\nimport { days2weeks, info2time } from '../../utils/datetime'\n\n\n\nclass ScheduleTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.handleClick = this.handleClick.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  handleClick(element) {\n    const [start, end] = info2time(element.receptionInfo)\n    this.setState({[element.date]: {\n      state: !this.state[element.date],\n      startTime: element.date+'T'+start+':00',\n      endTime: element.date+'T'+end+':00',\n    }});\n  }\n\n  handleSubmit() {\n    console.log('schedule tabl state', this.state);\n    Object.keys(this.state)\n      .filter(x => this.state[x].state)\n      .map(x => this.props.createAppointment([\n        this.props.omsNumber,\n        this.props.birthDate,\n        {\n          startTime: this.state[x].startTime,\n          endTime: this.state[x].endTime,\n          doctor: this.props.doctor,\n        },\n      ]));\n    // this.setState(Object.keys(this.state).reduce((obj, x) => {console.log(obj, x); obj[x] = {state: false}; return obj;}, {}))\n  }\n\n  renderHead() {\n    return (\n      <thead>\n        <tr>\n          <th>Понедельник</th>\n          <th>Вторник</th>\n          <th>Среда</th>\n          <th>Четверг</th>\n          <th>Пятница</th>\n          <th>Суббота</th>\n          <th>Воскресенье</th>\n        </tr>\n      </thead>);\n  }\n\n  renderBody() {\n    const table = [];\n    const weeks = days2weeks(this.props.schedule.schedule);\n  \n    for (const week of weeks){\n      let row = [];\n      for (const day of week) {\n        // active={Boolean(this.state[day.date])}\n        row.push(<td><ScheduleCell handleClick={this.handleClick} active={Boolean(this.state[day.date])} cell={day}/></td>)\n      }\n      table.push(<tr>{row}</tr>)\n    }\n\n    return table;\n  }\n\n  render() {\n    return (\n      <div className={styles.schedule}>\n        <table className={styles.table}>\n          {this.renderHead()}\n        <tbody>\n          {this.renderBody()}\n        </tbody>\n      </table>\n      <div className={styles.footer}>\n        <NavLink to={'/appointments'}>\n          <Button onClick={this.handleSubmit} variant='primary' size='lg' active>{'Встать в очередь'}</Button>\n        </NavLink>\n      </div>\n    </div>\n    );\n  }\n\n}\n\n\nconst mapStateToProps = state => {console.log('state schedule table', state); return(\n  {\n    omsNumber: state.user.omsNumber,\n    birthDate: state.user.birthDate,\n  }\n);}\n\nconst mapDispatchToProps = dispatch => ({\n  createAppointment: payload => dispatch(createAppointment(payload)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScheduleTable);"]},"metadata":{},"sourceType":"module"}