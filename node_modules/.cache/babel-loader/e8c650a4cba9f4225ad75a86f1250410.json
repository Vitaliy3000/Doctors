{"ast":null,"code":"import _objectSpread from \"/Users/17476018U/Google \\u0414\\u0438\\u0441\\u043A/Projects/Frontend/Project/DoctorsFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/17476018U/Google \\u0414\\u0438\\u0441\\u043A/Projects/Frontend/Project/DoctorsFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/17476018U/Google \\u0414\\u0438\\u0441\\u043A/Projects/Frontend/Project/DoctorsFront/src/App.js\";\nimport React, { Component, Fragment } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport NotFoundPage from './pages/NotFoundPage';\nimport HelloPage from './pages/HelloPage';\nimport HelpPage from './pages/HelpPage';\nimport AppointmentPage from './pages/AppointmentPage';\nimport DepartmentPage from './pages/DepartmentPage';\nimport DoctorPage from './pages/DoctorPage';\nimport SchedulePage from './pages/SchedulePage';\nimport AuthorizationPage from './pages/AuthorizationPage';\nimport Header from './components/Header/Header';\nimport styles from './App.module.css';\nimport Spinner from 'react-bootstrap/Spinner'; // localStorage.clear()\n\nfunction formatBirthDate(date) {\n  const _date$split = date.split('/'),\n        _date$split2 = _slicedToArray(_date$split, 3),\n        day = _date$split2[0],\n        month = _date$split2[1],\n        year = _date$split2[2];\n\n  return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n}\n\nconst PROXY_URL = \"https://proxy-q-doctor.herokuapp.com/api/emias/\";\nconst SCHEDULE_URL = \"schedule\";\nconst BASE_URL = \"https://back-q-doctor.herokuapp.com/api\";\nconst APPOINTMENT_URL = \"/people/appointments\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleAuthorization = person => {\n      localStorage.setItem('birthDate', formatBirthDate(person.birthDate));\n      localStorage.setItem('omsNumber', person.omsNumber);\n      this.setState(_objectSpread({}, this.state, {\n        loading: {\n          flg: true\n        }\n      }));\n      this.fetchSchedule(localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'));\n    };\n\n    this.state = {\n      loading: {\n        flg: false\n      }\n    };\n    this.handleAuthorization = this.handleAuthorization.bind(this);\n    this.handleDeleteAllAppointment = this.handleDeleteAllAppointment.bind(this);\n    this.handleDeleteAppointment = this.handleDeleteAppointment.bind(this);\n    this.handleAppointment = this.handleAppointment.bind(this);\n  }\n\n  fetchSchedule(omsNumber, birthDate) {\n    console.log(omsNumber, birthDate);\n    return fetch(PROXY_URL + SCHEDULE_URL + \"?oms_number=\".concat(omsNumber, \"&birth_date=\").concat(birthDate), {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(response => localStorage.setItem('schedule', JSON.stringify(response))).finally(_ => this.setState(_objectSpread({}, this.state, {\n      loading: {\n        flg: false\n      }\n    }))); // .catch(err => localStorage.setItem('schedule', JSON.stringify({})));\n  }\n\n  fetchAppointment(omsNumber, birthDate) {\n    return fetch(BASE_URL + APPOINTMENT_URL + \"?oms_number=\".concat(omsNumber, \"&birth_date=\").concat(birthDate), {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(response => this.setState(_objectSpread({}, this.state, {\n      departments: response\n    }))).catch(err => this.setState(_objectSpread({}, this.state, {\n      departments: []\n    }))).finally(_ => this.setState(_objectSpread({}, this.state, {\n      loading: {\n        flg: false\n      }\n    })));\n  }\n\n  fetchDeleteAppointment(appointmentId, omsNumber, birthDate) {\n    return fetch(BASE_URL + APPOINTMENT_URL + \"/\".concat(appointmentId, \"?oms_number=\").concat(omsNumber, \"&birth_date=\").concat(birthDate), {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(() => this.setState(_objectSpread({}, this.state, {\n      departments: this.state.departments.filter(department => department.appointment_id !== appointmentId)\n    })));\n  }\n\n  handleAppointment() {\n    this.setState(_objectSpread({}, this.state, {\n      loading: {\n        flg: true\n      }\n    }));\n    this.fetchAppointment(localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'));\n  }\n\n  handleDeleteAppointment(appointmentId) {\n    this.fetchDeleteAppointment(appointmentId, localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'));\n  }\n\n  handleDeleteAllAppointment(doctor) {\n    this.state.departments.filter(department => department.available_resource_id === doctor).map(department => this.fetchDeleteAppointment(department.appointment_id, localStorage.getItem('omsNumber'), localStorage.getItem('birthDate')));\n  }\n\n  render() {\n    const page = React.createElement(\"div\", {\n      className: styles.main,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: HelloPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/authorization\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(AuthorizationPage, {\n      handleSubmit: this.handleAuthorization,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/appointment/department/:departmentId/doctor/:doctorId/schedule\",\n      component: SchedulePage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/appointment/department/:departmentId/doctor\",\n      component: DoctorPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/appointment/department\",\n      component: DepartmentPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/appointments\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(AppointmentPage, {\n      departments: this.state.departments,\n      handleAppointment: this.handleAppointment,\n      handleDeleteAllAppointment: this.handleDeleteAllAppointment,\n      handleDeleteAppointment: this.handleDeleteAppointment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/help\",\n      component: HelpPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/\",\n      component: NotFoundPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })));\n    const loadPage = React.createElement(\"div\", {\n      className: styles.loadPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(Spinner, {\n      animation: \"border\",\n      variant: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })); // const successPage = ();\n\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.App,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Header, {\n      handleSubmit: this.handleAuthorization,\n      active: Boolean(localStorage.getItem('schedule')),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), this.state.loading.flg ? loadPage : page));\n  }\n\n}\n\n;\nexport default App;","map":{"version":3,"sources":["/Users/17476018U/Google Диск/Projects/Frontend/Project/DoctorsFront/src/App.js"],"names":["React","Component","Fragment","BrowserRouter","Router","Route","Switch","NotFoundPage","HelloPage","HelpPage","AppointmentPage","DepartmentPage","DoctorPage","SchedulePage","AuthorizationPage","Header","styles","Spinner","formatBirthDate","date","split","day","month","year","PROXY_URL","SCHEDULE_URL","BASE_URL","APPOINTMENT_URL","App","constructor","props","handleAuthorization","person","localStorage","setItem","birthDate","omsNumber","setState","state","loading","flg","fetchSchedule","getItem","bind","handleDeleteAllAppointment","handleDeleteAppointment","handleAppointment","console","log","fetch","headers","then","response","json","JSON","stringify","finally","_","fetchAppointment","departments","catch","err","fetchDeleteAppointment","appointmentId","method","filter","department","appointment_id","doctor","available_resource_id","map","render","page","main","loadPage","Boolean"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport NotFoundPage from './pages/NotFoundPage';\nimport HelloPage from './pages/HelloPage';\nimport HelpPage from './pages/HelpPage';\nimport AppointmentPage from './pages/AppointmentPage';\nimport DepartmentPage from './pages/DepartmentPage';\nimport DoctorPage from './pages/DoctorPage';\nimport SchedulePage from './pages/SchedulePage';\nimport AuthorizationPage from './pages/AuthorizationPage';\n\nimport Header from './components/Header/Header';\n\nimport styles from './App.module.css';\n\nimport Spinner from 'react-bootstrap/Spinner'\n\n\n\n// localStorage.clear()\n\n\nfunction formatBirthDate(date) {\n\tconst [day, month, year] = date.split('/');\n\treturn `${year}-${month}-${day}`\n}\n\n\nconst PROXY_URL = \"https://proxy-q-doctor.herokuapp.com/api/emias/\"\nconst SCHEDULE_URL = \"schedule\"\n\nconst BASE_URL = \"https://back-q-doctor.herokuapp.com/api\"\nconst APPOINTMENT_URL = \"/people/appointments\"\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\t\tthis.state = {loading: {flg: false}};\n\t\n    this.handleAuthorization = this.handleAuthorization.bind(this);\n\t\tthis.handleDeleteAllAppointment = this.handleDeleteAllAppointment.bind(this);\n    this.handleDeleteAppointment = this.handleDeleteAppointment.bind(this);\n    this.handleAppointment = this.handleAppointment.bind(this);\n\t}\n\n\tfetchSchedule(omsNumber, birthDate) {\n    console.log(omsNumber, birthDate)\n    return fetch(PROXY_URL+SCHEDULE_URL+`?oms_number=${omsNumber}&birth_date=${birthDate}`,\n                 {headers: {'Content-Type': 'application/json'}})\n\t\t\t\t\t\t.then(response => response.json())\n            .then(response => localStorage.setItem('schedule', JSON.stringify(response)))\n            .finally(_ => this.setState({...this.state, loading: {flg: false}}))\n            // .catch(err => localStorage.setItem('schedule', JSON.stringify({})));\n  };\n\n  fetchAppointment(omsNumber, birthDate) {\n\t\treturn fetch(BASE_URL+APPOINTMENT_URL+`?oms_number=${omsNumber}&birth_date=${birthDate}`,\n\t\t\t\t\t\t\t\t {headers: {'Content-Type': 'application/json'}})\n\t\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t\t.then(response => this.setState({...this.state, departments: response}))\n            .catch(err => this.setState({...this.state, departments: []}))\n            .finally(_ => this.setState({...this.state, loading: {flg: false}}));\n  };\n\n  fetchDeleteAppointment(appointmentId, omsNumber, birthDate) {\n\t\treturn fetch(BASE_URL+APPOINTMENT_URL+`/${appointmentId}?oms_number=${omsNumber}&birth_date=${birthDate}`,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmethod: 'DELETE',\n\t\t\t\t\t\t\t\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(()=>this.setState({...this.state, departments: this.state.departments.filter(department => department.appointment_id !== appointmentId)}));\n  };\n\n  handleAppointment() {\n    this.setState({...this.state, loading: {flg: true}});\n    this.fetchAppointment(localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'));\n  }\n\n\thandleDeleteAppointment(appointmentId) {\n\t\tthis.fetchDeleteAppointment(appointmentId, localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'));\n\t};\n\n\thandleDeleteAllAppointment(doctor) {\n\t\tthis.state.departments.filter(department => department.available_resource_id === doctor).map(department =>\n\t\t\tthis.fetchDeleteAppointment(department.appointment_id, localStorage.getItem('omsNumber'), localStorage.getItem('birthDate')));\n\t};\n\n  handleAuthorization = person => {\n    localStorage.setItem('birthDate', formatBirthDate(person.birthDate));\n\t\tlocalStorage.setItem('omsNumber', person.omsNumber);\n\t\tthis.setState({...this.state, loading: {flg: true}});\n    this.fetchSchedule(localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'));\n  };\n\n  render() {\n    const page = (\n      <div className={styles.main}>\n        <Switch>\n          <Route exact path=\"/\" component={HelloPage} />\n          <Route path=\"/authorization\">\n            <AuthorizationPage handleSubmit={this.handleAuthorization} />\n          </Route>\n          <Route path=\"/appointment/department/:departmentId/doctor/:doctorId/schedule\" component={SchedulePage} />\n          <Route path=\"/appointment/department/:departmentId/doctor\" component={DoctorPage} />\n          <Route path=\"/appointment/department\" component={DepartmentPage} />\n          <Route path=\"/appointments\">\n            <AppointmentPage\n             departments={this.state.departments}\n             handleAppointment={this.handleAppointment}\n             handleDeleteAllAppointment={this.handleDeleteAllAppointment}\n             handleDeleteAppointment={this.handleDeleteAppointment} />\n          </Route>\n          <Route path=\"/help\" component={HelpPage} />\n          <Route path=\"/\" component={NotFoundPage} />\n        </Switch>\n      </div>\n    );\n\n    const loadPage = (\n      <div className={styles.loadPage} ><Spinner animation=\"border\" variant=\"primary\" /></div>\n    );\n\n    // const successPage = ();\n\n    return (\n      <Router>\n        <div className={styles.App}>\n          <Header handleSubmit={this.handleAuthorization} active={Boolean(localStorage.getItem('schedule'))}/>\n          {this.state.loading.flg ? loadPage : page}\n        </div>\n      </Router>\n    );\n  };\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}