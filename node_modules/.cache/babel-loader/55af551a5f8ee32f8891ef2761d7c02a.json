{"ast":null,"code":"var _jsxFileName = \"/Users/17476018U/Google \\u0414\\u0438\\u0441\\u043A/Projects/Frontend/Project/DoctorsFront/src/components/Appointment/Appointment.js\";\nimport React from 'react';\nimport styles from './Appointment.module.css';\nimport AppointmentItem from '../AppointmentItem/AppointmentItem';\nconst BASE_URL = \"http://back-q-doctor.herokuapp.com/api\";\nconst APPOINTMENT_URL = \"/people/appointments\";\nconst PROXY_URL = \"http://proxy-q-doctor.herokuapp.com/api/emias/\";\nconst DOCTOR_NAME_URL = \"doctor_name\"; // const available_resource_id = doctor['lpuRoomsInfo']['lpuRoomView'][0]['availableResourceId']\n// const lpu_id = doctor['lpuRoomsInfo']['lpuRoomView'][0]['lpuId']\n\nexport default class Appointment extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      appointments: []\n    };\n  }\n\n  fetchAppointments(oms_number, birth_date) {\n    return fetch(BASE_URL + APPOINTMENT_URL + \"?oms_number=\".concat(oms_number, \"&birth_date=\").concat(birth_date)).then(response => response.json()); // .then(response => this.setState({ ...this.state, appointments: response}));\n  }\n\n  fetchDoctorName(available_resource_id, lpu_id, other) {\n    return fetch(PROXY_URL + DOCTOR_NAME_URL + \"?available_resource_id=\".concat(available_resource_id, \"&lpu_id=\").concat(lpu_id)).then(response => response.json()).then(response => this.setState(Object.assign(this.state, this.state.appointments.concat([Object.assign(other, response)]))));\n  }\n\n  componentDidMount() {\n    this.fetchAppointments(localStorage.getItem('omsNumber'), localStorage.getItem('birthDate')).then(appointments => appointments.map(appointment => this.fetchDoctorName(appointment['available_resource_id'], appointment['lpu_id'], appointment)));\n  }\n\n  render() {\n    return React.createElement(\"ul\", {\n      className: styles.items,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, this.state.appointments.map(appointment => React.createElement(AppointmentItem, Object.assign({}, appointment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }))));\n  }\n\n}\n;","map":{"version":3,"sources":["/Users/17476018U/Google Диск/Projects/Frontend/Project/DoctorsFront/src/components/Appointment/Appointment.js"],"names":["React","styles","AppointmentItem","BASE_URL","APPOINTMENT_URL","PROXY_URL","DOCTOR_NAME_URL","Appointment","Component","constructor","props","state","appointments","fetchAppointments","oms_number","birth_date","fetch","then","response","json","fetchDoctorName","available_resource_id","lpu_id","other","setState","Object","assign","concat","componentDidMount","localStorage","getItem","map","appointment","render","items"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,0BAAnB;AAEA,OAAOC,eAAP,MAA4B,oCAA5B;AAEA,MAAMC,QAAQ,GAAG,wCAAjB;AACA,MAAMC,eAAe,GAAG,sBAAxB;AAEA,MAAMC,SAAS,GAAG,gDAAlB;AACA,MAAMC,eAAe,GAAG,aAAxB,C,CAGA;AACA;;AAEA,eAAe,MAAMC,WAAN,SAA0BP,KAAK,CAACQ,SAAhC,CAA0C;AACxDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AAACC,MAAAA,YAAY,EAAE;AAAf,KAAb;AACA;;AAEDC,EAAAA,iBAAiB,CAACC,UAAD,EAAaC,UAAb,EAAyB;AACzC,WAAOC,KAAK,CAACb,QAAQ,GAACC,eAAT,yBAAwCU,UAAxC,yBAAiEC,UAAjE,CAAD,CAAL,CACFE,IADE,CACGC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADf,CAAP,CADyC,CAGrC;AACJ;;AAEDC,EAAAA,eAAe,CAACC,qBAAD,EAAwBC,MAAxB,EAAgCC,KAAhC,EAAuC;AACrD,WAAOP,KAAK,CAACX,SAAS,GAACC,eAAV,oCAAoDe,qBAApD,qBAAoFC,MAApF,CAAD,CAAL,CACFL,IADE,CACGC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADf,EAEFF,IAFE,CAEGC,QAAQ,IAAI,KAAKM,QAAL,CAAcC,MAAM,CAACC,MAAP,CAAc,KAAKf,KAAnB,EAA0B,KAAKA,KAAL,CAAWC,YAAX,CAAwBe,MAAxB,CAA+B,CAACF,MAAM,CAACC,MAAP,CAAcH,KAAd,EAAqBL,QAArB,CAAD,CAA/B,CAA1B,CAAd,CAFf,CAAP;AAGA;;AAEDU,EAAAA,iBAAiB,GAAG;AACnB,SAAKf,iBAAL,CAAuBgB,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAvB,EAA0DD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAA1D,EACEb,IADF,CACOL,YAAY,IAAIA,YAAY,CAACmB,GAAb,CAAiBC,WAAW,IAAI,KAAKZ,eAAL,CAAqBY,WAAW,CAAC,uBAAD,CAAhC,EAA2DA,WAAW,CAAC,QAAD,CAAtE,EAAkFA,WAAlF,CAAhC,CADvB;AAEA;;AAEAC,EAAAA,MAAM,GAAG;AACT,WACC;AAAI,MAAA,SAAS,EAAEhC,MAAM,CAACiC,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKvB,KAAL,CAAWC,YAAX,CAAwBmB,GAAxB,CAA4BC,WAAW,IAAI,oBAAC,eAAD,oBAAqBA,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA3C,CADF,CADD;AAKA;;AA9BuD;AA+BxD","sourcesContent":["import React from 'react';\n\nimport styles from './Appointment.module.css';\n\nimport AppointmentItem from '../AppointmentItem/AppointmentItem';\n\nconst BASE_URL = \"http://back-q-doctor.herokuapp.com/api\"\nconst APPOINTMENT_URL = \"/people/appointments\"\n\nconst PROXY_URL = \"http://proxy-q-doctor.herokuapp.com/api/emias/\"\nconst DOCTOR_NAME_URL = \"doctor_name\"\n\n\n// const available_resource_id = doctor['lpuRoomsInfo']['lpuRoomView'][0]['availableResourceId']\n// const lpu_id = doctor['lpuRoomsInfo']['lpuRoomView'][0]['lpuId']\n\nexport default class Appointment extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {appointments: []}\n\t}\n\n\tfetchAppointments(oms_number, birth_date) {\n\t\treturn fetch(BASE_URL+APPOINTMENT_URL+`?oms_number=${oms_number}&birth_date=${birth_date}`)\n\t\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t\t// .then(response => this.setState({ ...this.state, appointments: response}));\n\t}\n\n\tfetchDoctorName(available_resource_id, lpu_id, other) {\n\t\treturn fetch(PROXY_URL+DOCTOR_NAME_URL+`?available_resource_id=${available_resource_id}&lpu_id=${lpu_id}`)\n\t\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t\t.then(response => this.setState(Object.assign(this.state, this.state.appointments.concat([Object.assign(other, response)]) )));\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.fetchAppointments(localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'))\n\t\t\t.then(appointments => appointments.map(appointment => this.fetchDoctorName(appointment['available_resource_id'], appointment['lpu_id'], appointment)));\n\t}\n\n  render() {\n\t\treturn (\n\t\t\t<ul className={styles.items}>\n\t\t\t\t{this.state.appointments.map(appointment => <AppointmentItem {...appointment}/>)}\n\t\t\t</ul>\n\t\t);\n\t};\n};"]},"metadata":{},"sourceType":"module"}