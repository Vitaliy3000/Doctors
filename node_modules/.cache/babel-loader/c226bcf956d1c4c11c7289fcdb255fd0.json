{"ast":null,"code":"var _jsxFileName = \"/Users/17476018U/Google \\u0414\\u0438\\u0441\\u043A/Projects/Frontend/Project/DoctorsFront/src/components/ScheduleTable/ScheduleTable.js\";\nimport React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport ScheduleCell from '../ScheduleCell/ScheduleCell';\nimport Button from 'react-bootstrap/Button';\nimport styles from './ScheduleTable.module.css';\nimport { createAppointment } from '../../redux/appointment/actions';\nimport store from '../../redux/store/store';\n\nfunction days2weeks(days) {\n  const weeks = [];\n\n  for (let i = 0; i < days.length / 7; i++) {\n    weeks[i] = [];\n\n    for (let j = 0; j < 7; j++) {\n      weeks[i].push(days[i * 7 + j]);\n    }\n  }\n\n  return weeks;\n}\n\nexport default class ScheduleTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  handleClick(element) {\n    console.log('table', this.state, element.date);\n    this.setState({\n      [element.date]: !this.state[element.date]\n    });\n  }\n\n  handleSubmit() {\n    store.dispatch(createAppointment([store.getState().authorization.omsNumber, store.getState().authorization.birthDate, this.props.availableResourceId, this.props.complexResourceId, this.props.lpuId, this.props.code, Object.keys(this.state).filter(x => this.state[x])]));\n    this.setState(Object.keys(this.state).reduce((obj, x) => {\n      obj[x] = false;\n      return obj;\n    }, {}));\n  }\n\n  renderHead() {\n    return React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u043D\\u0435\\u0434\\u0435\\u043B\\u044C\\u043D\\u0438\\u043A\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"\\u0412\\u0442\\u043E\\u0440\\u043D\\u0438\\u043A\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"\\u0421\\u0440\\u0435\\u0434\\u0430\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"\\u0427\\u0435\\u0442\\u0432\\u0435\\u0440\\u0433\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"\\u041F\\u044F\\u0442\\u043D\\u0438\\u0446\\u0430\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"\\u0421\\u0443\\u0431\\u0431\\u043E\\u0442\\u0430\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"\\u0412\\u043E\\u0441\\u043A\\u0440\\u0435\\u0441\\u0435\\u043D\\u044C\\u0435\")));\n  }\n\n  renderBody() {\n    const table = [];\n    const weeks = days2weeks(store.getState().schedule.schedule);\n\n    for (const week of weeks) {\n      let row = [];\n\n      for (const day of week) {\n        // active={Boolean(this.state[day.date])}\n        row.push(React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, React.createElement(ScheduleCell, {\n          handleClick: this.handleClick,\n          active: Boolean(this.state[day.date]),\n          cell: day,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        })));\n      }\n\n      table.push(React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, row));\n    }\n\n    return table;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: styles.schedule,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: styles.table,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, this.renderHead(), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, this.renderBody())), React.createElement(\"div\", {\n      className: styles.footer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.handleSubmit,\n      variant: \"primary\",\n      size: \"lg\",\n      active: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, 'Встать в очередь')));\n  }\n\n}","map":{"version":3,"sources":["/Users/17476018U/Google Диск/Projects/Frontend/Project/DoctorsFront/src/components/ScheduleTable/ScheduleTable.js"],"names":["React","Component","Fragment","connect","ScheduleCell","Button","styles","createAppointment","store","days2weeks","days","weeks","i","length","j","push","ScheduleTable","constructor","props","state","handleClick","element","console","log","date","setState","handleSubmit","dispatch","getState","authorization","omsNumber","birthDate","availableResourceId","complexResourceId","lpuId","code","Object","keys","filter","x","reduce","obj","renderHead","renderBody","table","schedule","week","row","day","Boolean","render","footer"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\n\nimport ScheduleCell from '../ScheduleCell/ScheduleCell';\n\nimport Button from 'react-bootstrap/Button'\n\nimport styles from './ScheduleTable.module.css';\n\nimport { createAppointment } from '../../redux/appointment/actions';\nimport store from '../../redux/store/store'\n\n\nfunction days2weeks(days) {\n  const weeks = [];\n\n  for (let i = 0; i < days.length / 7; i++) {\n    weeks[i] = []\n    for (let j = 0; j <  7; j++) {\n      weeks[i].push(days[i*7+j])\n    }\n  }\n\n  return weeks\n}\n\n\nexport default class ScheduleTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  handleClick(element) {\n    console.log('table', this.state, element.date)\n    this.setState({[element.date]: !this.state[element.date]});\n  };\n\n  handleSubmit() {\n    store.dispatch(createAppointment([\n      store.getState().authorization.omsNumber,\n      store.getState().authorization.birthDate,\n      this.props.availableResourceId,\n      this.props.complexResourceId,\n      this.props.lpuId,\n      this.props.code,\n      Object.keys(this.state).filter(x => this.state[x])\n    ]\n    ));\n    this.setState(Object.keys(this.state).reduce((obj, x) => {obj[x] = false; return obj;}, {}))\n  }\n\n  renderHead() {\n    return (\n      <thead>\n        <tr>\n          <th>Понедельник</th>\n          <th>Вторник</th>\n          <th>Среда</th>\n          <th>Четверг</th>\n          <th>Пятница</th>\n          <th>Суббота</th>\n          <th>Воскресенье</th>\n        </tr>\n      </thead>);\n  }\n\n  renderBody() {\n    const table = [];\n    const weeks = days2weeks(store.getState().schedule.schedule);\n  \n    for (const week of weeks){\n      let row = [];\n      for (const day of week) {\n        // active={Boolean(this.state[day.date])}\n        row.push(<td><ScheduleCell handleClick={this.handleClick} active={Boolean(this.state[day.date])} cell={day}/></td>)\n      }\n      table.push(<tr>{row}</tr>)\n    }\n\n    return table;\n  };\n\n  render() {\n    return (\n      <div className={styles.schedule}>\n        <table className={styles.table}>\n          {this.renderHead()}\n        <tbody>\n          {this.renderBody()}\n        </tbody>\n      </table>\n      <div className={styles.footer}>\n        <Button onClick={this.handleSubmit} variant=\"primary\" size=\"lg\" active>{'Встать в очередь'}</Button>\n      </div>\n    </div>\n    );\n  };\n\n}\n"]},"metadata":{},"sourceType":"module"}