{"ast":null,"code":"var _jsxFileName = \"/Users/17476018U/Google \\u0414\\u0438\\u0441\\u043A/Projects/Frontend/Project/DoctorsFront/src/pages/AppointmentPage.js\";\nimport React from 'react';\nimport Tile from '../components/Tile/Tile';\nimport styles from './AppointmentPage.module.css';\nconst BASE_URL = \"http://back-q-doctor.herokuapp.com/api\";\nconst APPOINTMENT_URL = \"/people/appointments\";\nexport default class AppointmentPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = [];\n  }\n\n  fetchAppointment(omsNumber, birthDate) {\n    return fetch(BASE_URL + APPOINTMENT_URL + \"?oms_number=\".concat(omsNumber, \"&birth_date=\").concat(birthDate)).then(response => response.json()).then(response => this.setState(response)).catch(err => this.setState({}));\n  }\n\n  componentWillMount() {\n    fetchAppointment(localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'));\n  }\n\n  componentWillUpdate() {\n    fetchAppointment(localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'));\n  }\n\n  render() {\n    if (localStorage.getItem('schedule').length !== 0) {\n      if (this.state.length === 0) {\n        return React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, \"\\u0418\\u0434\\u0435\\u0442 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430\");\n      }\n\n      const doctors = [...new Set(this.state.map(x => x.available_resource_id))];\n      return React.createElement(\"div\", {\n        className: styles.page,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: styles.list,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, this.state.map(doctor => React.createElement(Tile, {\n        key: doctor,\n        appointments: this.state.filter(x => x.available_resource_id === doctor),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }))));\n    }\n\n    return React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"\\u0421\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0443\\u0439\\u0442\\u0435\\u0441\\u044C!\");\n  }\n\n}","map":{"version":3,"sources":["/Users/17476018U/Google Диск/Projects/Frontend/Project/DoctorsFront/src/pages/AppointmentPage.js"],"names":["React","Tile","styles","BASE_URL","APPOINTMENT_URL","AppointmentPage","Component","constructor","props","state","fetchAppointment","omsNumber","birthDate","fetch","then","response","json","setState","catch","err","componentWillMount","localStorage","getItem","componentWillUpdate","render","length","doctors","Set","map","x","available_resource_id","page","list","doctor","filter"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,IAAP,MAAiB,yBAAjB;AAEA,OAAOC,MAAP,MAAmB,8BAAnB;AAGA,MAAMC,QAAQ,GAAG,wCAAjB;AACA,MAAMC,eAAe,GAAG,sBAAxB;AAGA,eAAe,MAAMC,eAAN,SAA8BL,KAAK,CAACM,SAApC,CAA8C;AAC5DC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa,EAAb;AACA;;AAEDC,EAAAA,gBAAgB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACtC,WAAOC,KAAK,CAACV,QAAQ,GAACC,eAAT,yBAAwCO,SAAxC,yBAAgEC,SAAhE,CAAD,CAAL,CACFE,IADE,CACGC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADf,EAEFF,IAFE,CAEGC,QAAQ,IAAI,KAAKE,QAAL,CAAcF,QAAd,CAFf,EAGFG,KAHE,CAGIC,GAAG,IAAI,KAAKF,QAAL,CAAc,EAAd,CAHX,CAAP;AAIA;;AAEDG,EAAAA,kBAAkB,GAAG;AACpBV,IAAAA,gBAAgB,CAACW,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAD,EAAoCD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAApC,CAAhB;AACA;;AAEDC,EAAAA,mBAAmB,GAAG;AACrBb,IAAAA,gBAAgB,CAACW,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAD,EAAoCD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAApC,CAAhB;AACA;;AAEDE,EAAAA,MAAM,GAAG;AACR,QAAIH,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCG,MAAjC,KAA4C,CAAhD,EAAmD;AAClD,UAAI,KAAKhB,KAAL,CAAWgB,MAAX,KAAsB,CAA1B,EAA6B;AAC5B,eAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uFAAP;AACA;;AAED,YAAMC,OAAO,GAAG,CAAC,GAAG,IAAIC,GAAJ,CAAQ,KAAKlB,KAAL,CAAWmB,GAAX,CAAeC,CAAC,IAAIA,CAAC,CAACC,qBAAtB,CAAR,CAAJ,CAAhB;AACA,aACC;AAAK,QAAA,SAAS,EAAE5B,MAAM,CAAC6B,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAI,QAAA,SAAS,EAAE7B,MAAM,CAAC8B,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,KAAKvB,KAAL,CACCmB,GADD,CACKK,MAAM,IACV,oBAAC,IAAD;AACC,QAAA,GAAG,EAAEA,MADN;AAEC,QAAA,YAAY,EAAE,KAAKxB,KAAL,CAAWyB,MAAX,CAAkBL,CAAC,IAAIA,CAAC,CAACC,qBAAF,KAA4BG,MAAnD,CAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFD,CADF,CADD,CADD;AAaA;;AAED,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oIAAP;AACD;;AA7C4D","sourcesContent":["import React from 'react';\n\nimport Tile from '../components/Tile/Tile'\n\nimport styles from './AppointmentPage.module.css'\n\n\nconst BASE_URL = \"http://back-q-doctor.herokuapp.com/api\"\nconst APPOINTMENT_URL = \"/people/appointments\"\n\n\nexport default class AppointmentPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = [];\n\t}\n\n\tfetchAppointment(omsNumber, birthDate) {\n\t\treturn fetch(BASE_URL+APPOINTMENT_URL+`?oms_number=${omsNumber}&birth_date=${birthDate}`)\n\t\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t\t.then(response => this.setState(response))\n\t\t\t\t\t\t.catch(err => this.setState({}));\n\t}\n\n\tcomponentWillMount() {\n\t\tfetchAppointment(localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'));\n\t}\n\n\tcomponentWillUpdate() {\n\t\tfetchAppointment(localStorage.getItem('omsNumber'), localStorage.getItem('birthDate'));\n\t}\n\n\trender() {\n\t\tif (localStorage.getItem('schedule').length !== 0) {\n\t\t\tif (this.state.length === 0) {\n\t\t\t\treturn <h2>Идет загрузка</h2>;\n\t\t\t}\n\n\t\t\tconst doctors = [...new Set(this.state.map(x => x.available_resource_id))];\n\t\t\treturn (\n\t\t\t\t<div className={styles.page}>\n\t\t\t\t\t<ul className={styles.list}>\n\t\t\t\t\t\t{this.state\n\t\t\t\t\t\t\t.map(doctor => \n\t\t\t\t\t\t\t\t<Tile \n\t\t\t\t\t\t\t\t\tkey={doctor}\n\t\t\t\t\t\t\t\t\tappointments={this.state.filter(x => x.available_resource_id === doctor)} \n\t\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn <h2>Сначала авторизуйтесь!</h2>;\n};\n}\n"]},"metadata":{},"sourceType":"module"}